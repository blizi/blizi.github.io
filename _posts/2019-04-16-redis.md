---
layout: post
title: "nosql"
date: 2019-04-15 16:34:06 
description: "数据库"
tag: redis
---

### 启动服务

```
redis-server redis.conf
redis-cli -p 6379
```

### 关闭服务

```
shutdown
exit
```



###	常用命令



##### 基本

```java
flushall    // 删除所有key
flushdb    // 删除当前key
exist key   // 判断key是否存在
move key db  // 移动到某个db（当前db就没有了）
expire key sec  // 为key设置有效时间（秒）
ttl key  // 查看还有多少秒过期（-1 表示永不过期  -2表示已过期）
type key  // 查看key的类型
```



##### string :

```java
append key              // 字符连接  
strlen key               // 查看长度
incr key                  // 加1（必须为数字）
decr key                  // 减一（数字）
incrby key value             // 加value（数字）
decrby key value             // 减value（数字）
getrange key a b         // 截取key a到b的内容（类似数组下标）b=-1代表获取全部
setrange key a value         // 从a（下标）开始设置值为value
setex（set with expire）    // 设置时间 setex key time value 设置生命周期时间为time秒
setnx key value               // key不存在则set
mset key1 value key2 value...   // 一次设置多个key-value
mget key1 key2 key3....        // 一个获取多个key值
msetnx key1 value1 key2 value2... // 满足所有key都不存在时set
```



##### list :

```java
lrange key a b                  //从栈顶依次弹出
lpush key value1 value2 ...     // 顺序进栈（key存在则在后面继续添加）
rpush key value1 value2....     // 逆序进栈
lpop key                        // 弹出栈顶（只弹出一个元素）
rpop key                        //  弹出栈底第一个元素
lindex key index                // 按照下标获取元素（下表为index）
llen key                        //  获得长度
lrem key count value            // 删除count个value（value为list中已存在的值）
ltrim key a b                   // 获取a到b的值
rpoplpush key1 key2              // 弹出key1的底，顺序进栈key2
lset key idnex value                 // 为key下标为index的设置为value
linsert key after/before pivot value // 在list中的第一个pivot的前面或后面插入value
```



##### set

```java
sadd key value1 value2 ...   //  value若重复则自动去重（key存在则在原有的基础上继续添加）
smembers key                //    遍历key集合
sismember key value         //   判断key集合中是否有value  有则1 没有则-1.
scard key                   // 获取集合大小
srem key value1  value2...    // 删除key集合中的value1和value2...
srandmember key count     //  在集合key中随机出count个数字（count大于key大小则得到整个key内容）
spop                 //   随机出栈（一个）
smove key1 key2 value  //   将集合key1中的value移动到key2（key1的value消失）
    
    
数学集合：

sdiff key1 key2 key3...   // key1中存在但后面的集合中不存在  （差集）
sinter key1 key2 key3...  // 所有key中都存在的  （交集）
sunion key1 key2 key3... //  并集

```











<br>

转载请注明：[blizi的博客](blizi.club) » 